# AI-Assisted Tentpole Ranking — Practical Procedure

**Purpose:** Step-by-step guide for running the tentpole ranking script, interpreting output, and converting results into curatorial decisions.

**Related:** `docs/theory/SATELLITE_DEPTH.md` §8 (theory), `docs/theory/MARGINS_AND_TEXTURE.md` §9 (deletion workflow)

---

## 1. What Is Tentpole Ranking?

Within each Satellite category, films occupy three roles:

| Role | Score | Meaning |
|------|-------|---------|
| **Category Core** | 8–10 | Anchors the tradition — "keep last" if ever over cap |
| **Category Reference** | 5–7 | Essential range; secondary directors or canonical films |
| **Texture** | 0–4 | Skilled practitioners, historical completeness; cut first when over cap |

The ranking script scores every film in a category using signals from the TMDb/OMDb cache and external reference lists. It does not require new API calls — it reads existing cache data.

---

## 2. Running the Script

```bash
# Step 1: Refresh library inventory
python audit.py

# Step 2: Run tentpole ranking
python scripts/rank_category_tentpoles.py

# Output written to:
#   output/tentpole_rankings.md   — human-readable, sorted by category
```

Prerequisites:
- `output/library_audit.csv` — generated by `python audit.py`
- `output/tmdb_cache.json` — enriched API data (more enrichment = better scores)
- `docs/SORTING_DATABASE.md` — SORTING_DATABASE placement detection

Run time: ~2 seconds. No API calls.

---

## 3. Score Components

| Signal | Max | Source | Notes |
|--------|-----|--------|-------|
| `director` | 3 | Director in category's routing directors list | 3=documented director, 2=secondary, 1=adjacent |
| `decade` | 2 | Film decade within category's active period | 2=peak decade, 1=adjacent, 0=outside |
| `keywords` | 2 | TMDb keywords match category's `keyword_signals` | 2=multiple hits, 1=one hit |
| `canonical` | 1 | Film in SORTING_DATABASE or Reference canon | 1=yes, 0=no |
| `text` | 1 | TMDb overview or OMDb plot mentions text signals | 1=match, 0=no |
| `external` | 3 | Sight & Sound 2022 Top 250 or Criterion Collection | 3=included, 0=not |

**Maximum score:** 10/10

**Category Core threshold (8–10):** Requires an external signal (Sight & Sound or Criterion, +3) alongside strong director and decade evidence. No current collection films reach this threshold — the bar is intentionally high.

**Category Reference threshold (5–7):** A documented director (score 3) + peak decade (score 2) = 5/10 baseline. Most films by known category directors in peak decades score 5–7.

---

## 4. Reading the Output

### Score breakdown format

```
1. A Bay of Blood (1971) — Mario Bava — 7/10
   `director:3 decade:2 keywords:2 canonical:0 text:0 external:0`
   Keywords: axe murder, gore, murder, proto-slasher, serial killer, slasher, video nasty
```

- `director:3` = Bava is in Giallo's directors list
- `decade:2` = 1971 is in Giallo's peak decade (1970s)
- `keywords:2` = multiple keyword hits

### When scores are unexpectedly low

| Symptom | Likely cause | Action |
|---------|-------------|--------|
| `director:0` for a known category director | Director not in routing list | Add to `lib/constants.py` directors |
| `decade:0` for a film you believe belongs | Film outside category's active period | Check if misclassified; consider SORTING_DATABASE pin |
| All scores 2/10, no director signal | Director unknown to cache; no keywords | No action — these are texture films; score is correct |

### "No films found in library_audit.csv"

The category folder has no films. Either the folder hasn't been created yet (`python scaffold.py`) or audit.py hasn't been run after recent moves.

---

## 5. From Rankings to Decisions

### Step 1: Identify Category Reference films

The top films in the 5–7 range for each category are your working Category Reference. These are the films you protect first when trimming to cap.

Check that your SORTING_DATABASE.md has explicit entries for each confirmed Category Reference film. Pins ensure they are never auto-rerouted by future routing rule changes:

```markdown
# Giallo — Category Reference
A Bay of Blood (1971) | Satellite/Giallo/1970s/
Your Vice Is a Locked Room and Only I Have the Key (1972) | Satellite/Giallo/1970s/
```

### Step 2: Note Category Core threshold

If any film scores 8+, it is a Category Core candidate. Document it with the rationale. Currently no collection films reach this threshold.

A film achieves 8+ by combining:
- Sight & Sound 2022 Top 250 OR Criterion Collection (+3) AND
- A documented director for this category (+3) AND
- Peak decade (+2) AND
- At least one keyword or text match (+1–2)

### Step 3: Update tentpole blocks

After reviewing, update the `**Tentpoles**` block in `docs/SATELLITE_CATEGORIES.md` for each category with the current ranking results. See §7 below for the standard block format.

### Step 4: Mark deletion candidates

Films in the Texture tier (0–4) with no director affiliation (`director:0`) and no canonical signal are first in line for /Out if the category goes over cap. See `docs/theory/MARGINS_AND_TEXTURE.md` §9 for the full deletion decision workflow.

---

## 6. When to Re-Run

| Event | Action |
|-------|--------|
| 5+ new films added to a category | Re-run ranking for that category |
| New cache enrichment pass completed | Re-run all rankings |
| `keyword_signals` updated in `lib/constants.py` | Re-run affected categories |
| Category exceeds cap — planning deletions | Re-run ranking first |
| Monthly review | Re-run to refresh scores |

---

## 7. Standard Tentpole Block Format

When updating `docs/SATELLITE_CATEGORIES.md`, use this format:

```markdown
**Tentpoles (YYYY-MM):** *(run `python scripts/rank_category_tentpoles.py` to refresh)*
- **Category Core (8–10):** *(none — requires Sight & Sound / Criterion + director + peak decade)*
- **Category Reference (5–7):** Film A (year, director, score/10) · Film B (year, director, score/10)
- **Cut first (0–4):** see `output/tentpole_rankings.md`
```

For categories with no ranked films yet: `*(no ranked films — category folder empty or not yet populated)*`

---

## 8. Limitations

The ranking score is a heuristic, not a verdict. It cannot measure:
- Personal engagement depth (Bourdieu's connoisseurship criterion)
- Formal distinctiveness within the category
- Historical influence on later directors in the tradition

A film with `director:0` but exceptional formal distinctiveness may be more important than a 6/10 Category Reference film by a known director. The score gives you a starting point. The four criteria in `docs/theory/SATELLITE_DEPTH.md` §3 are the standard.

Use the score to **identify candidates for review**, not to make mechanical cut decisions. The score tells you which films to look at first; curatorial judgment determines what stays.
